{"ast":null,"code":"import \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nimport _classCallCheck from \"/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _class,\n    _jsxFileName = \"/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/src/components/LayoutComponents/Authorize/index.js\";\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nvar Authorize = (_dec = connect(function (_ref) {\n  var user = _ref.user;\n  return {\n    user: user\n  };\n}), _dec(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Authorize, _React$Component);\n\n  function Authorize() {\n    _classCallCheck(this, Authorize);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Authorize).apply(this, arguments));\n  }\n\n  _createClass(Authorize, [{\n    key: \"render\",\n    value: function render() {\n      var role = this.props.user.role; // current user role\n\n      var _this$props = this.props,\n          children = _this$props.children,\n          _this$props$redirect = _this$props.redirect,\n          redirect = _this$props$redirect === void 0 ? false : _this$props$redirect,\n          _this$props$to = _this$props.to,\n          to = _this$props$to === void 0 ? '/404' : _this$props$to,\n          _this$props$roles = _this$props.roles,\n          roles = _this$props$roles === void 0 ? [] : _this$props$roles;\n      var authorized = roles.includes(role);\n\n      var AuthorizedChildren = function AuthorizedChildren() {\n        // if user not equal needed role and if component is a page - make redirect to needed route\n        if (!authorized && redirect) {\n          _notification.error({\n            message: 'Unauthorized Access',\n            description: 'You have no rights to access this page!'\n          });\n\n          return React.createElement(Redirect, {\n            to: to,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 21\n            },\n            __self: this\n          });\n        } // if user not authorized return null to component\n\n\n        if (!authorized) {\n          return null;\n        } // if access is successful render children\n\n\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        }, children);\n      };\n\n      return AuthorizedChildren();\n    }\n  }]);\n\n  return Authorize;\n}(React.Component)) || _class);\nexport default Authorize;","map":{"version":3,"sources":["/home/pmaheshwari/Desktop/TowardsStartUp/MunWorld/cleanui-admin-template-react-cra/src/components/LayoutComponents/Authorize/index.js"],"names":["React","connect","Redirect","Authorize","user","role","props","children","redirect","to","roles","authorized","includes","AuthorizedChildren","error","message","description","Component"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,QAAyB,kBAAzB;IAIMC,S,WADLF,OAAO,CAAC;AAAA,MAAGG,IAAH,QAAGA,IAAH;AAAA,SAAe;AAAEA,IAAAA,IAAI,EAAJA;AAAF,GAAf;AAAA,CAAD,C;;;;;;;;;;;;;6BAEG;AAAA,UAEGC,IAFH,GAGH,KAAKC,KAHF,CAELF,IAFK,CAEGC,IAFH,EAGQ;;AAHR,wBAIyD,KAAKC,KAJ9D;AAAA,UAICC,QAJD,eAICA,QAJD;AAAA,6CAIWC,QAJX;AAAA,UAIWA,QAJX,qCAIsB,KAJtB;AAAA,uCAI6BC,EAJ7B;AAAA,UAI6BA,EAJ7B,+BAIkC,MAJlC;AAAA,0CAI0CC,KAJ1C;AAAA,UAI0CA,KAJ1C,kCAIkD,EAJlD;AAKP,UAAMC,UAAU,GAAGD,KAAK,CAACE,QAAN,CAAeP,IAAf,CAAnB;;AACA,UAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B;AACA,YAAI,CAACF,UAAD,IAAeH,QAAnB,EAA6B;AAC3B,wBAAaM,KAAb,CAAmB;AACjBC,YAAAA,OAAO,EAAE,qBADQ;AAEjBC,YAAAA,WAAW,EAAE;AAFI,WAAnB;;AAIA,iBAAO,oBAAC,QAAD;AAAU,YAAA,EAAE,EAAEP,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,SAR8B,CAS/B;;;AACA,YAAI,CAACE,UAAL,EAAiB;AACf,iBAAO,IAAP;AACD,SAZ8B,CAa/B;;;AACA,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAMJ,QAAN,CAAP;AACD,OAfD;;AAgBA,aAAOM,kBAAkB,EAAzB;AACD;;;;EAxBqBb,KAAK,CAACiB,S;AA2B9B,eAAed,SAAf","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { notification } from 'antd'\n\n@connect(({ user }) => ({ user }))\nclass Authorize extends React.Component {\n  render() {\n    const {\n      user: { role },\n    } = this.props // current user role\n    const { children, redirect = false, to = '/404', roles = [] } = this.props\n    const authorized = roles.includes(role)\n    const AuthorizedChildren = () => {\n      // if user not equal needed role and if component is a page - make redirect to needed route\n      if (!authorized && redirect) {\n        notification.error({\n          message: 'Unauthorized Access',\n          description: 'You have no rights to access this page!',\n        })\n        return <Redirect to={to} />\n      }\n      // if user not authorized return null to component\n      if (!authorized) {\n        return null\n      }\n      // if access is successful render children\n      return <div>{children}</div>\n    }\n    return AuthorizedChildren()\n  }\n}\n\nexport default Authorize\n"]},"metadata":{},"sourceType":"module"}