{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = function () {\n  var options = _defaultOptionsForComputation.WMA;\n\n  function calculator(data) {\n    var _options = options,\n        windowSize = _options.windowSize,\n        sourcePath = _options.sourcePath;\n    var weight = windowSize * (windowSize + 1) / 2;\n    var waverage = (0, _utils.slidingWindow)().windowSize(windowSize).sourcePath(sourcePath).accumulator(function (values) {\n      var total = (0, _d3Array.sum)(values, function (v, i) {\n        return (i + 1) * v;\n      });\n      return total / weight;\n    });\n    return waverage(data);\n  }\n\n  calculator.undefinedLength = function () {\n    var _options2 = options,\n        windowSize = _options2.windowSize;\n    return windowSize - 1;\n  };\n\n  calculator.options = function (x) {\n    if (!arguments.length) {\n      return options;\n    }\n\n    options = _extends({}, _defaultOptionsForComputation.WMA, x);\n    return calculator;\n  };\n\n  return calculator;\n};\n\nvar _d3Array = require(\"d3-array\");\n\nvar _utils = require(\"../utils\");\n\nvar _defaultOptionsForComputation = require(\"./defaultOptionsForComputation\");","map":null,"metadata":{},"sourceType":"script"}